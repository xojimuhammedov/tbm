import{c as u,j as s,q as N,bi as k,r as h,k as w,J as A,M as C}from"./index-ADhmmBpU.js";import{u as v,c as f}from"./button-Bp2lHjov-bkEUXTzY.js";import{l as S}from"./badge-DGmo3xSE-Cderfv3F.js";import{M as m}from"./MyTooltip-DPJtpMhP.js";import{a as b,u as T}from"./useMutate-B2j67kPQ.js";import{M as g}from"./MutateRequestMethod-D0dsk-6r.js";import{l as p}from"./lodash-BI9_Ro3R.js";import{C as M}from"./MyAccordion-x3W9CRJW.js";import{M as I}from"./MyModal-3lICjm9q.js";import{r as q}from"./index.es-njk8-3Q7.js";import{E as P}from"./eye-CW1pDi29.js";import{S as E}from"./useDelete-DMNw96p5.js";import{T as z}from"./trash-2-B_r_Bsxl.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],B=u("circle-x",R),ss=({title:t,document:e})=>{const{t:a}=v();return s.jsxs("div",{className:"rounded-lg shadow-sm border p-6 space-y-3",children:[s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("div",{className:"text-sm",children:t})}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-1",children:a("TALABNOMA")}),s.jsx("p",{className:"text-body-md-semi-bold",children:a("Rejadan tashqari taʼmirlash sozlash ishlarini o‘tkazish")})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["1. ",a("Ish bajarish tartibi"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.workProcedure)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["2. ",a("Sana va vaqt"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.workDateTime)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["3. ",a("Stansiya / oraliq"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.station)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["4. ",a("NO raqami"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.noNumber)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["5. ",a("AI-7, 9 kanallari"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.aiChannels)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["6. ",a("Ishni bajarish sababi"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.workReason)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["7. ",a("Bajarilayotgan ishlar xususiyati"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.workDescription)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["8. ",a("KO xolati"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.koStatus)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["9. ",a("AAG"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.bypassSchedule)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["10. ",a("Zaxiralashning boshqa yo‘llari"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.alternativeBackup)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["11. ",a("Boshqaruvchi"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.responsiblePerson)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["12. ",a("Kelishildi"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.approvedByTechnicalDirector)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["13. ",a("Kelishildi"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.approvedByLocalAI)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["14. ",a("Talabnoma tuzuvchi (AP)"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.orderAP)||" "})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"min-w-48",children:["15. ",a("Talabnoma tuzuvchi (UBP)"),":"]}),s.jsx("div",{className:"flex-1 border-b text-gray-900",children:(e==null?void 0:e.orderMBB)||" "})]})]})]})},D=({baseKey:t,id:e,onUpdated:a,disabled:x})=>{const{t:r}=v(),{toast:l}=N(),{confirm:i}=k(),{query:c}=b({url:[...t,`${e}`,"status"],method:g.PATCH,options:{onError:j=>{l({variant:"destructive",title:r(`${p.get(j,"response.statusText","Error")}`),description:r(`${p.get(j,"response.data.message","An error occurred. Contact the administrator")}`)})},onSuccess:()=>{l({variant:"success",title:r("Success"),description:r("Application updated successfully")}),a==null||a()}}}),n=h.useMemo(()=>!x&&!c.isPending,[x,c.isPending]),o=h.useCallback(()=>{n&&i({onConfirm:()=>c.mutate({status:"confirm"})})},[n,i,r,l,c]);return s.jsx(m,{content:r("Accept"),children:s.jsx(M,{className:"size-4 cursor-pointer",onClick:o})})},_=({open:t,onOpenChange:e,onSubmit:a,submitting:x})=>{const{t:r}=v(),l=T({defaultValues:{reason:""}}),i=h.useCallback(c=>{var o;const n=(o=c.reason)==null?void 0:o.trim();n&&a(n)},[a]);return s.jsx(I,{open:t,onOpenChange:e,header:r("Reject document"),size:"2xl",children:s.jsx(w,{...l,children:s.jsxs("form",{onSubmit:l.handleSubmit(i),className:"px-2",children:[s.jsx(q,{control:l.control,name:"reason",label:r("Reason"),placeholder:r("Enter reason for rejection"),className:"min-h-[120px]",required:!0}),s.jsxs("div",{className:"flex items-center justify-between border-t pt-3 mt-3 gap-3",children:[s.jsx(f,{type:"button",variant:"secondary",disabled:x,onClick:()=>e(!1),children:r("Cancel")}),s.jsx(f,{type:"submit",children:r("Submit")})]})]})})})},$=({baseKey:t,id:e,onUpdated:a,disabled:x})=>{const{t:r}=v(),{toast:l}=N(),[i,c]=h.useState(!1),{query:n}=b({url:[...t,`${e}`,"status"],method:g.PATCH,options:{onError:d=>{l({variant:"destructive",title:r(`${p.get(d,"response.statusText","Error")}`),description:r(`${p.get(d,"response.data.message","An error occurred. Contact the administrator")}`)})},onSuccess:()=>{l({variant:"success",title:r("Success"),description:r("Application updated successfully")}),a==null||a()}}}),o=h.useMemo(()=>!x&&!n.isPending,[x,n.isPending]),j=h.useCallback(()=>{o&&c(!0)},[o]),y=h.useCallback(d=>{if(!(d!=null&&d.trim())){l({variant:"destructive",title:r("Reason is required")});return}n.mutate({status:"reject",reason:d.trim()},{onSuccess:()=>{c(!1)}})},[r,l,n]);return s.jsxs(s.Fragment,{children:[s.jsx(m,{content:r("Reject"),children:s.jsx(B,{className:"size-4 cursor-pointer",onClick:j})}),s.jsx(_,{open:i,onOpenChange:c,onSubmit:y})]})},O=t=>{switch(t){case"approved":return"green-outlined";case"sent":return"blue-outlined";case"rejected":return"red-outlined";default:return"gray-outlined"}},es=(t,e,a,x,r,l)=>[{key:"workProcedure",dataIndex:"workProcedure",name:t("Work produce")},{key:"workDateTime",dataIndex:"workDateTime",name:t("Work date and time")},{key:"created_at",dataIndex:"created_at",name:t("Sent time"),render:i=>A(i,C)},{key:"sender",dataIndex:"creatorId",name:t("Sender"),render:i=>s.jsxs("div",{children:[i.first_name," ",i.second_name]})},{key:"status",dataIndex:"status",name:t("Status"),render:i=>s.jsx(S,{variant:O(i),children:i})},{key:"actions",dataIndex:"_id",name:"",render:i=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(D,{baseKey:r,id:i,onUpdated:l}),s.jsx($,{baseKey:r,id:i,onUpdated:l}),s.jsx(m,{content:t("View"),children:s.jsx(P,{className:"size-4 cursor-pointer",onClick:()=>x(i)})}),s.jsx(m,{content:t("Edit"),children:s.jsx(E,{className:"size-4 cursor-pointer",onClick:()=>e(i)})}),s.jsx(m,{content:t("Delete"),children:s.jsx(z,{className:"size-4 cursor-pointer",onClick:()=>a(i)})})]})}];export{ss as A,es as c};
