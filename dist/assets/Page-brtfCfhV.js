import{j as e,i as D,q as P,r}from"./index-ADhmmBpU.js";import{P as S}from"./PageHeader-l3FtlNyv.js";import{P as I}from"./PageWrapper-D7EWSq9s.js";import{u as f,c as T}from"./button-Bp2lHjov-bkEUXTzY.js";import{l as w}from"./lodash-BI9_Ro3R.js";import{H as V}from"./index.es-BKLEAvF1.js";import{M as E}from"./MyModal-3lICjm9q.js";import{A as q,c as F}from"./createApplicationColumns-BV7-RfVS.js";import{D as K}from"./DocumentInfo-DZJr13Om.js";import{F as L}from"./MyAccordion-x3W9CRJW.js";import{u as M}from"./useLists-DBTxrMAi.js";import{u as H,A as h}from"./useApplicationDocument-C6bKJL3W.js";import{u as R}from"./useDelete-DMNw96p5.js";import{L as x}from"./ListStatisticsCard-BcOJa2-j.js";import{C as z}from"./circle-plus-CJWL5GeC.js";import"./sidebar-C0lF1Npi.js";import"./dropdown-menu-BPBcxHRB-EjT0ADL9-BtVDbh7T.js";import"./useQueryParams-Dns8Zny6.js";import"./createLucideIcon-B950nf2d-ChSZaRdU.js";import"./popover-HTqpqYpJ-CIljcfgV-Ob8cCMTy.js";import"./MySelect-CDOMHlry-CVNRsqeU.js";import"./badge-DGmo3xSE-Cderfv3F.js";import"./MyTooltip-DPJtpMhP.js";import"./useMutate-B2j67kPQ.js";import"./useApi-BNT2PGFQ.js";import"./MutateRequestMethod-D0dsk-6r.js";import"./index.es-njk8-3Q7.js";import"./eye-CW1pDi29.js";import"./trash-2-B_r_Bsxl.js";import"./user-D-Egm9vv.js";import"./useGetOne-DA0KuYmv.js";const _=({open:t,onOpenChange:a,document:s})=>{const{t:l}=f();return e.jsx(E,{open:t,onOpenChange:a,size:"8xl",className:"overflow-auto",header:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"size-5"}),e.jsx("span",{children:(s==null?void 0:s.title)||"Application document"})]}),children:e.jsxs("div",{className:"flex flex-1 flex-col xl:flex-row gap-4 overflow-hidden",children:[e.jsx("div",{className:`
            flex-1 border rounded-lg p-2
            overflow-visible
            xl:overflow-y-auto
            xl:max-h-[80vh]
            scrollbar-thin scrollbar-thumb-gray-400 hover:scrollbar-thumb-gray-500 scrollbar-track-gray-100 scrollbar-thumb-rounded-full
          `,children:e.jsx(q,{title:s==null?void 0:s.title,document:s})}),e.jsx(K,{docType:l("Application"),onOpenChange:a,document:s})]})})},$=()=>{var v;const{t}=f(),a=D(),{toast:s}=P(),[l,n]=r.useState(!1),[m,c]=r.useState(null),{removeWithConfirm:p}=R([h]),{query:i,handleFilter:d,params:u}=M({url:[h]}),{applicationDocumentQuery:C}=H(m),y=r.useCallback(()=>{a("/rtsi/application/create")},[a]),g=r.useCallback(o=>{a(`/rtsi/application/edit/${o}`)},[a]),j=r.useCallback(o=>{c(o),n(!0)},[]),N=r.useCallback(o=>{n(o),o||c(null)},[]),b=r.useCallback(o=>{p(o).then(()=>{i.refetch(),s({variant:"success",title:t("Success"),description:t("Application document successfully deleted")})}).catch(A=>{s({variant:"destructive",title:t(`${w.get(A,"response.statusText","Error")}`),description:t(`${w.get(A,"response.data.message","An error occurred. Contact the administrator")}`)})})},[i,p,t,s]),k=r.useMemo(()=>F(t,g,b,j,[h],()=>{i.refetch()}),[b,g,j,i,t]);return{params:u,handleAdd:y,handleFilter:d,loading:i.isLoading,dataSource:i.data,columns:k,openView:l,currentItem:(v=C.data)==null?void 0:v.data,handleCloseView:N}},Ae=()=>{const{t}=f(),{handleAdd:a,loading:s,dataSource:l,columns:n,params:m,handleFilter:c,currentItem:p,handleCloseView:i,openView:d}=$(),u=r.useMemo(()=>[{name:t("RTSI"),path:"/rtsi",isActive:!1},{name:t("Application"),path:"/rtsi/application",isActive:!0}],[t]);return e.jsxs(e.Fragment,{children:[e.jsx(_,{open:d,onOpenChange:i,document:p}),e.jsx(S,{className:"sticky top-0",breadcrumbs:u,children:e.jsxs(T,{size:"sm",onClick:a,children:[e.jsx(z,{}),t("Add new")]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 px-4 mt-3",children:[e.jsx(x,{title:t("Tasdiqlanganlar"),count:123}),e.jsx(x,{title:t("Ko'rib chiqilmoqda"),count:123}),e.jsx(x,{title:t("Rad etilganlar"),count:123})]}),e.jsx(I,{children:e.jsx(V,{tableKey:"application-documents",hasNumbers:!0,hasSearch:!0,isStickyHeader:!0,loading:s,params:m,onParamChange:c,rowKey:"_id",dataSource:l,dataKey:"docs",columns:n})})]})};export{Ae as default};
