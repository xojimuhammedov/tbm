import{J as j,j as s,M as k,i as y,q as C,r as n}from"./index-ADhmmBpU.js";import{P as E}from"./PageHeader-l3FtlNyv.js";import{P as F}from"./PageWrapper-D7EWSq9s.js";import{u as f,c as b}from"./button-Bp2lHjov-bkEUXTzY.js";import{l as h}from"./lodash-BI9_Ro3R.js";import{H as v}from"./index.es-BKLEAvF1.js";import{F as l}from"./flows.constants-Dopgbqvl.js";import{u as w}from"./useLists-DBTxrMAi.js";import{S as P,u as I}from"./useDelete-DMNw96p5.js";import{M as x}from"./MyTooltip-DPJtpMhP.js";import{T as S}from"./trash-2-B_r_Bsxl.js";import{C as T}from"./circle-plus-CJWL5GeC.js";import"./sidebar-C0lF1Npi.js";import"./dropdown-menu-BPBcxHRB-EjT0ADL9-BtVDbh7T.js";import"./useQueryParams-Dns8Zny6.js";import"./createLucideIcon-B950nf2d-ChSZaRdU.js";import"./popover-HTqpqYpJ-CIljcfgV-Ob8cCMTy.js";import"./MySelect-CDOMHlry-CVNRsqeU.js";import"./useApi-BNT2PGFQ.js";import"./MutateRequestMethod-D0dsk-6r.js";const A=(e,t,r)=>[{key:"id_number",dataIndex:"id_number",name:e("ID nomer")},{key:"consumer_id_point_a",dataIndex:"consumer_id_point_a",name:e("Наименование A")},{key:"updated_at",dataIndex:"updated_at",name:e("Updated date"),render:a=>j(a,k)},{key:"_id",dataIndex:"_id",name:e(""),render:a=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(x,{content:e("Edit"),children:s.jsx(P,{className:"size-4",onClick:()=>r(a)})}),s.jsx(x,{content:e("Delete"),children:s.jsx(S,{className:"size-4",onClick:()=>t(a)})})]})}],D=()=>{const{t:e}=f(),t=y(),{removeWithConfirm:r}=I([l]),{toast:a}=C(),{query:o,handleFilter:d,params:c}=w({url:[l]}),i=n.useCallback(m=>{r(m).then(()=>{o.refetch(),a({variant:"success",title:e("Success"),description:e("Flow removed successfully")})}).catch(p=>{a({variant:"destructive",title:e(`${h.get(p,"response.statusText","Error")}`),description:e(`${h.get(p,"response.data.message","An error occurred. Contact the administrator")}`)})})},[r,e,a,o]),_=n.useCallback(()=>{t("/flows-id/create")},[t]),u=n.useCallback(m=>{t(`/flows-id/edit/${m}`)},[t]),g=n.useMemo(()=>A(e,i,u),[e,i,u]);return{loading:o.isLoading,columns:g,dataSource:o.data,params:c,handleFilter:d,handleAdd:_}},ee=()=>{const{t:e}=f(),{loading:t,columns:r,dataSource:a,handleFilter:o,params:d,handleAdd:c}=D(),i=n.useMemo(()=>[{name:e("Flows ID"),path:"/flows-id",isActive:!0}],[e]);return s.jsxs(s.Fragment,{children:[s.jsx(E,{className:"sticky top-0",breadcrumbs:i,children:s.jsxs(b,{size:"sm",onClick:c,children:[s.jsx(T,{}),e("Add new")]})}),s.jsx(F,{children:s.jsx(v,{tableKey:l,hasNumbers:!0,hasSearch:!0,isStickyHeader:!0,hasPagination:!0,loading:t,params:d,onParamChange:o,rowKey:"_id",dataSource:a,dataKey:"docs",columns:r})})]})};export{ee as default};
