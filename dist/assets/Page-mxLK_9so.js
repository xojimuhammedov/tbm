import{J as I,j as e,a as D,M as V,i as _,q as F,r as i}from"./index-ADhmmBpU.js";import{P as M}from"./PageHeader-l3FtlNyv.js";import{P}from"./PageWrapper-D7EWSq9s.js";import{u as f,c as z}from"./button-Bp2lHjov-bkEUXTzY.js";import{l as y}from"./lodash-BI9_Ro3R.js";import{H as A}from"./index.es-BKLEAvF1.js";import{l as q}from"./badge-DGmo3xSE-Cderfv3F.js";import{M as x}from"./MyTooltip-DPJtpMhP.js";import{F as k}from"./file-8TEH2UwQ.js";import{E as H}from"./eye-CW1pDi29.js";import{S as K,u as L}from"./useDelete-DMNw96p5.js";import{T as $}from"./trash-2-B_r_Bsxl.js";import{u as R}from"./useLists-DBTxrMAi.js";import{u as O,T as w}from"./useTelevisionDocument-CJq5Pj2G.js";import{M as Q}from"./MyModal-3lICjm9q.js";import{T as W}from"./TelevisionDocument-WwBADac1.js";import{D as Y}from"./DocumentInfo-DZJr13Om.js";import{F as B}from"./MyAccordion-x3W9CRJW.js";import{L as h}from"./ListStatisticsCard-BcOJa2-j.js";import{C as J}from"./circle-plus-CJWL5GeC.js";import"./sidebar-C0lF1Npi.js";import"./dropdown-menu-BPBcxHRB-EjT0ADL9-BtVDbh7T.js";import"./useQueryParams-Dns8Zny6.js";import"./createLucideIcon-B950nf2d-ChSZaRdU.js";import"./popover-HTqpqYpJ-CIljcfgV-Ob8cCMTy.js";import"./MySelect-CDOMHlry-CVNRsqeU.js";import"./useApi-BNT2PGFQ.js";import"./MutateRequestMethod-D0dsk-6r.js";import"./useGetOne-DA0KuYmv.js";import"./user-D-Egm9vv.js";const U=s=>{switch(s){case"approved":return"green-outlined";case"sent":return"blue-outlined";case"rejected":return"red-outlined";default:return"gray-outlined"}},G=(s,a,r,o)=>[{key:"title",dataIndex:"title",name:s("Document"),render:(t,l)=>{const c=l.files&&l.files[0]?`${D.BASE_PATH}${l.files[0]}`:void 0;return c?e.jsxs("a",{className:"flex items-center gap-2 cursor-pointer",href:c,target:"_blank",children:[e.jsx(k,{size:15})," ",t]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:15})," ",t]})}},{key:"created_at",dataIndex:"created_at",name:s("Sent time"),render:t=>t?I(t,V):"-"},{key:"sender",dataIndex:"creatorId",name:s("Sender"),render:t=>e.jsxs("div",{children:[t==null?void 0:t.first_name," ",t==null?void 0:t.second_name]})},{key:"status",dataIndex:"status",name:s("Status"),render:t=>e.jsx(q,{variant:U(t),children:t||"-"})},{key:"actions",dataIndex:"_id",name:"",render:t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{content:s("View"),children:e.jsx(H,{className:"size-4 cursor-pointer",onClick:()=>o(t)})}),e.jsx(x,{content:s("Edit"),children:e.jsx(K,{className:"size-4 cursor-pointer",onClick:()=>a(t)})}),e.jsx(x,{content:s("Delete"),children:e.jsx($,{className:"size-4 cursor-pointer",onClick:()=>r(t)})})]})}],X=()=>{var T;const{t:s}=f(),a=_(),{toast:r}=F(),[o,t]=i.useState(!1),[l,c]=i.useState(null),{removeWithConfirm:m}=L([w]),{query:d,handleFilter:u,params:p}=R({url:[w]}),{televisionDocumentQuery:C}=O(l),N=i.useCallback(()=>{a("/television/create")},[a]),j=i.useCallback(n=>{a(`/television/edit/${n}`)},[a]),g=i.useCallback(n=>{c(n),t(!0)},[]),E=i.useCallback(n=>{t(n),n||c(null)},[]),v=i.useCallback(n=>{m(n).then(()=>{d.refetch(),r({variant:"success",title:s("Success"),description:s("F56 document successfully")})}).catch(b=>{r({variant:"destructive",title:s(`${y.get(b,"response.statusText","Error")}`),description:s(`${y.get(b,"response.data.message","An error occurred. Contact the administrator")}`)})})},[m,s,r]),S=i.useMemo(()=>G(s,j,v,g),[v,j,g,s]);return{params:p,handleAdd:N,handleFilter:u,loading:d.isLoading,dataSource:d.data,columns:S,openView:o,currentItem:(T=C.data)==null?void 0:T.data,handleCloseView:E}},Z=({open:s,onOpenChange:a,document:r})=>{const{t:o}=f();return e.jsx(Q,{open:s,onOpenChange:a,size:"8xl",className:"overflow-auto",header:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"size-5"}),e.jsx("span",{children:(r==null?void 0:r.title)||o("Television document")})]}),children:e.jsxs("div",{className:"flex flex-1 flex-col xl:flex-row gap-4 overflow-hidden",children:[e.jsx("div",{className:`
            flex-1 border rounded-lg p-2
            overflow-visible
            xl:overflow-y-auto
            xl:max-h-[80vh]
            scrollbar-thin scrollbar-thumb-gray-400 hover:scrollbar-thumb-gray-500 scrollbar-track-gray-100 scrollbar-thumb-rounded-full
          `,children:e.jsx(W,{title:r==null?void 0:r.title,document:r})}),e.jsx(Y,{docType:o("Television"),onOpenChange:a,document:r})]})})},De=()=>{const{t:s}=f(),{handleAdd:a,loading:r,dataSource:o,columns:t,params:l,handleFilter:c,currentItem:m,handleCloseView:d,openView:u}=X(),p=i.useMemo(()=>[{name:s("Television"),path:"/television",isActive:!0}],[s]);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{open:u,onOpenChange:d,document:m}),e.jsx(M,{className:"sticky top-0",breadcrumbs:p,children:e.jsxs(z,{size:"sm",onClick:a,children:[e.jsx(J,{}),s("Add new")]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 px-4 mt-3",children:[e.jsx(h,{title:s("Tasdiqlanganlar"),count:123}),e.jsx(h,{title:s("Ko'rib chiqilmoqda"),count:123}),e.jsx(h,{title:s("Rad etilganlar"),count:123})]}),e.jsx(P,{children:e.jsx(A,{tableKey:"television-documents",hasNumbers:!0,hasSearch:!0,isStickyHeader:!0,loading:r,params:l,onParamChange:c,rowKey:"_id",dataSource:o,dataKey:"docs",columns:t})})]})};export{De as default};
