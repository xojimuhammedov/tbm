import{q as g,r as i,j as e,k as A,z as d,i as S,Q as y}from"./index-ADhmmBpU.js";import{P as I}from"./PageHeader-l3FtlNyv.js";import{P as T}from"./PageWrapper-D7EWSq9s.js";import{l as x}from"./lodash-BI9_Ro3R.js";import"./index.es-njk8-3Q7.js";import{u as w,a as E}from"./useMutate-B2j67kPQ.js";import{a as _}from"./zod-BQt-Wj8X.js";import{c as O}from"./createF54Schema-CidpDcDP.js";import{M as N}from"./MutateRequestMethod-D0dsk-6r.js";import{u as V,F}from"./useF54Document-SmdNDJqk.js";import{u as R}from"./useChannel-CLHGnbdc.js";import{u as m}from"./button-Bp2lHjov-bkEUXTzY.js";import"./sidebar-C0lF1Npi.js";import"./createLucideIcon-B950nf2d-ChSZaRdU.js";import"./useApi-BNT2PGFQ.js";import"./useGetOne-DA0KuYmv.js";import"./channels.constants-BBumYQzh.js";const K=({id:t,onSave:l})=>{const{t:r}=m(),{toast:s}=g(),{f54DocumentQuery:c}=V(t),o=w({resolver:_(O(r)),defaultValues:{prophylaxisType:"Yillik reja"}}),{channel:n}=R(o.watch("channel_id"));i.useEffect(()=>{var b,p;const a=(b=c.data)==null?void 0:b.data;if(a){o.setValue("channel_id",a.channel_id._id),o.setValue("real_minutes",a.real_minutes),o.setValue("date",a.date),o.setValue("minute",a.minute),o.setValue("date",a.date),o.setValue("prophylaxisType",a.prophylaxisType),o.setValue("cause",a.cause),o.setValue("ubpZone",a.ubpZone),o.setValue("note",a.note),o.setValue("description",a.description);const h=((p=a.recipientIds)==null?void 0:p.map(f=>f._id))??[];o.setValue("recipientIds",h.length>0?h:[""])}},[c.data,o]),i.useEffect(()=>{n&&(o.setValue("noNumber",n.channel_number_in_stream),o.setValue("teOeDesignation",n.timeslot_number),o.setValue("workArea",`${n.rcpu_site_id_a}/${n.rcpu_site_id_z}`))},[n]);const{query:u}=E({url:[F,t||""],method:t?N.PUT:N.POST,options:{onError:a=>{s({variant:"destructive",title:r(`${x.get(a,"response.statusText","Error")}`),description:r(`${x.get(a,"response.data.message","An error occurred. Contact the administrator")}`)})},onSuccess:()=>{o.reset(),l==null||l(),s({variant:"success",title:r("Success"),description:r(t?"F54 updated successfully":"F54 created successfully")})}}}),j=i.useCallback(a=>{u.mutate(a)},[u]);return console.log(o.formState.errors),{form:o,handleSubmit:j}},M=({id:t,onSave:l})=>{const{t:r}=m(),{form:s,handleSubmit:c}=K({id:t,onSave:l});return e.jsx(A,{...s,children:e.jsx("form",{onSubmit:s.handleSubmit(c),className:"p-4",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-center",children:"O‘ZBEKISTON RESPUBLIKASI ALOQA, AXBOROTLASHTIRISH VA TELEKOMMUNIKATSIYA TEXNOLOGIYALARI DAVLAT QO‘MITASI"}),e.jsx("h2",{className:"text-xl font-semibold mt-2 text-center",children:"“O‘ZBEKISTON TELEKOMMUNIKATSIYA TARMOQLARINI BOSHQARISH RESPUBLIKA MARKAZI” DAVLAT UNITAR KORXONASI"}),e.jsxs("div",{className:"grid grid-cols-3 gap-12 mb-8 mt-4",children:[e.jsx(d,{control:s.control,placeholder:r("Sana"),className:"border border-t-0 border-l-0 border-r-0 rounded-none"}),e.jsx(d,{control:s.control,placeholder:r("No"),className:"border border-t-0 border-l-0 border-r-0 rounded-none"}),e.jsx(d,{control:s.control,placeholder:r("Soni"),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})]}),e.jsx(d,{control:s.control,label:r("Kimga"),className:"w-1/3 border border-t-0 border-l-0 border-r-0 rounded-none"}),e.jsxs("table",{className:"border border-gray-300 mt-6",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{rowSpan:2,className:"border border-gray-300 p-2 w-48 align-middle",children:"Алоқа йўналиши (А п - В п.)"}),e.jsx("th",{rowSpan:2,className:"border border-gray-300 p-2 w-20",children:"ID"}),e.jsx("th",{rowSpan:2,className:"border border-gray-300 p-2 w-32",children:"«А» томон адреси"}),e.jsx("th",{rowSpan:2,className:"border border-gray-300 p-2 w-32",children:"«В» томон адреси"}),e.jsx("th",{rowSpan:2,className:"border border-gray-300 p-2 w-32",children:"Фармойиш номери"}),e.jsx("th",{rowSpan:2,className:"border border-gray-300 p-2 w-40",children:"«Ўзбектелеком» АК филиаллари томонидан алоқа-ларни ташкил этиш муддати"}),e.jsx("th",{rowSpan:2,className:"p-2",children:"Буёртмачининг алоқани қабул қилган вақти-нинг Ф.И.Ш."})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"",children:[e.jsx("td",{className:"border border-gray-300 p-1",children:e.jsx(d,{control:s.control,placeholder:r(""),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})}),e.jsx("td",{className:"border border-gray-300 p-1",children:e.jsx(d,{control:s.control,placeholder:r(""),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})}),e.jsx("td",{className:"border border-gray-300 p-1",children:e.jsx(d,{control:s.control,placeholder:r(""),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})}),e.jsx("td",{className:"border border-gray-300 p-1",children:e.jsx(d,{control:s.control,placeholder:r(""),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})}),e.jsx("td",{className:"border border-gray-300 p-1",children:e.jsx(d,{control:s.control,placeholder:r(""),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})}),e.jsx("td",{className:"border border-gray-300 p-1",children:e.jsx(d,{control:s.control,placeholder:r(""),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})}),e.jsx("td",{className:"p-1",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(d,{control:s.control,placeholder:r(""),className:"border border-t-0 border-l-0 border-r-0 rounded-none"})})})]})})]})]})})})},W=()=>{const{t}=m(),l=S(),{id:r}=y(),s=i.useMemo(()=>[{name:t("RTSI"),path:"rtsi",isActive:!1},{name:t("F-54 document"),path:"f-54",isActive:!1},{name:t(r?"Edit":"Create"),path:r?`${r}/edit`:"create",isActive:!0}],[r,t]);return e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"sticky top-0",breadcrumbs:s}),e.jsx(T,{children:e.jsx(M,{id:r,onSave:()=>l("/rtsi/f-54"),onCancel:()=>l("/rtsi/f-54")})})]})};export{W as default};
