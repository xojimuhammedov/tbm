import {
  H,
  He,
  J,
  Mt,
  Oe,
  Pe,
  Qe,
  Qn,
  S,
  Tt,
  Ze,
  ce,
  de,
  er,
  ht,
  ke,
  mo,
  nr,
  rr,
  tr,
  ze
} from "./chunk-SPRZPVMT.js";
import {
  require_react
} from "./chunk-HPJJ3TUJ.js";
import {
  __toESM
} from "./chunk-SNAQBZPT.js";

// node_modules/dgz-ui-shared/dist/popover-HTqpqYpJ-CIljcfgV.js
var u = __toESM(require_react(), 1);
var P = "Popover";
var [y, me] = He(P, [
  Qn
]);
var m = Qn();
var [V, d] = y(P);
var A = (e) => {
  const {
    __scopePopover: a,
    children: t,
    open: n,
    defaultOpen: o,
    onOpenChange: r,
    modal: s = false
  } = e, i = m(a), c = u.useRef(null), [v, g] = u.useState(false), [x, p] = Qe({
    prop: n,
    defaultProp: o ?? false,
    onChange: r,
    caller: P
  });
  return S.jsx(er, { ...i, children: S.jsx(
    V,
    {
      scope: a,
      contentId: Ze(),
      triggerRef: c,
      open: x,
      onOpenChange: p,
      onOpenToggle: u.useCallback(() => p((C) => !C), [p]),
      hasCustomAnchor: v,
      onCustomAnchorAdd: u.useCallback(() => g(true), []),
      onCustomAnchorRemove: u.useCallback(() => g(false), []),
      modal: s,
      children: t
    }
  ) });
};
A.displayName = P;
var F = "PopoverAnchor";
var W = u.forwardRef(
  (e, a) => {
    const { __scopePopover: t, ...n } = e, o = d(F, t), r = m(t), { onCustomAnchorAdd: s, onCustomAnchorRemove: i } = o;
    return u.useEffect(() => (s(), () => i()), [s, i]), S.jsx(tr, { ...r, ...n, ref: a });
  }
);
W.displayName = F;
var D = "PopoverTrigger";
var E = u.forwardRef(
  (e, a) => {
    const { __scopePopover: t, ...n } = e, o = d(D, t), r = m(t), s = H(a, o.triggerRef), i = S.jsx(
      de.button,
      {
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": o.open,
        "aria-controls": o.contentId,
        "data-state": I(o.open),
        ...n,
        ref: s,
        onClick: J(e.onClick, o.onOpenToggle)
      }
    );
    return o.hasCustomAnchor ? i : S.jsx(tr, { asChild: true, ...r, children: i });
  }
);
E.displayName = D;
var O = "PopoverPortal";
var [ee, oe] = y(O, {
  forceMount: void 0
});
var N = (e) => {
  const { __scopePopover: a, forceMount: t, children: n, container: o } = e, r = d(O, a);
  return S.jsx(ee, { scope: a, forceMount: t, children: S.jsx(Pe, { present: t || r.open, children: S.jsx(Oe, { asChild: true, container: o, children: n }) }) });
};
N.displayName = O;
var f = "PopoverContent";
var $ = u.forwardRef(
  (e, a) => {
    const t = oe(f, e.__scopePopover), { forceMount: n = t.forceMount, ...o } = e, r = d(f, e.__scopePopover);
    return S.jsx(Pe, { present: n || r.open, children: r.modal ? S.jsx(re, { ...o, ref: a }) : S.jsx(ae, { ...o, ref: a }) });
  }
);
$.displayName = f;
var te = ce("PopoverContent.RemoveScroll");
var re = u.forwardRef(
  (e, a) => {
    const t = d(f, e.__scopePopover), n = u.useRef(null), o = H(a, n), r = u.useRef(false);
    return u.useEffect(() => {
      const s = n.current;
      if (s) return Tt(s);
    }, []), S.jsx(ht, { as: te, allowPinchZoom: true, children: S.jsx(
      M,
      {
        ...e,
        ref: o,
        trapFocus: t.open,
        disableOutsidePointerEvents: true,
        onCloseAutoFocus: J(e.onCloseAutoFocus, (s) => {
          var i;
          s.preventDefault(), r.current || (i = t.triggerRef.current) == null || i.focus();
        }),
        onPointerDownOutside: J(
          e.onPointerDownOutside,
          (s) => {
            const i = s.detail.originalEvent, c = i.button === 0 && i.ctrlKey === true, v = i.button === 2 || c;
            r.current = v;
          },
          { checkForDefaultPrevented: false }
        ),
        onFocusOutside: J(
          e.onFocusOutside,
          (s) => s.preventDefault(),
          { checkForDefaultPrevented: false }
        )
      }
    ) });
  }
);
var ae = u.forwardRef(
  (e, a) => {
    const t = d(f, e.__scopePopover), n = u.useRef(false), o = u.useRef(false);
    return S.jsx(
      M,
      {
        ...e,
        ref: a,
        trapFocus: false,
        disableOutsidePointerEvents: false,
        onCloseAutoFocus: (r) => {
          var s, i;
          (s = e.onCloseAutoFocus) == null || s.call(e, r), r.defaultPrevented || (n.current || (i = t.triggerRef.current) == null || i.focus(), r.preventDefault()), n.current = false, o.current = false;
        },
        onInteractOutside: (r) => {
          var s, i;
          (s = e.onInteractOutside) == null || s.call(e, r), r.defaultPrevented || (n.current = true, r.detail.originalEvent.type === "pointerdown" && (o.current = true));
          const c = r.target;
          (i = t.triggerRef.current) != null && i.contains(c) && r.preventDefault(), r.detail.originalEvent.type === "focusin" && o.current && r.preventDefault();
        }
      }
    );
  }
);
var M = u.forwardRef(
  (e, a) => {
    const {
      __scopePopover: t,
      trapFocus: n,
      onOpenAutoFocus: o,
      onCloseAutoFocus: r,
      disableOutsidePointerEvents: s,
      onEscapeKeyDown: i,
      onPointerDownOutside: c,
      onFocusOutside: v,
      onInteractOutside: g,
      ...x
    } = e, p = d(f, t), C = m(t);
    return Mt(), S.jsx(
      ke,
      {
        asChild: true,
        loop: true,
        trapped: n,
        onMountAutoFocus: o,
        onUnmountAutoFocus: r,
        children: S.jsx(
          ze,
          {
            asChild: true,
            disableOutsidePointerEvents: s,
            onInteractOutside: g,
            onEscapeKeyDown: i,
            onPointerDownOutside: c,
            onFocusOutside: v,
            onDismiss: () => p.onOpenChange(false),
            children: S.jsx(
              nr,
              {
                "data-state": I(p.open),
                role: "dialog",
                id: p.contentId,
                ...C,
                ...x,
                ref: a,
                style: {
                  ...x.style,
                  "--radix-popover-content-transform-origin": "var(--radix-popper-transform-origin)",
                  "--radix-popover-content-available-width": "var(--radix-popper-available-width)",
                  "--radix-popover-content-available-height": "var(--radix-popper-available-height)",
                  "--radix-popover-trigger-width": "var(--radix-popper-anchor-width)",
                  "--radix-popover-trigger-height": "var(--radix-popper-anchor-height)"
                }
              }
            )
          }
        )
      }
    );
  }
);
var k = "PopoverClose";
var ne = u.forwardRef(
  (e, a) => {
    const { __scopePopover: t, ...n } = e, o = d(k, t);
    return S.jsx(
      de.button,
      {
        type: "button",
        ...n,
        ref: a,
        onClick: J(e.onClick, () => o.onOpenChange(false))
      }
    );
  }
);
ne.displayName = k;
var se = "PopoverArrow";
var ie = u.forwardRef(
  (e, a) => {
    const { __scopePopover: t, ...n } = e, o = m(t);
    return S.jsx(rr, { ...o, ...n, ref: a });
  }
);
ie.displayName = se;
function I(e) {
  return e ? "open" : "closed";
}
var le = A;
var ue = E;
var de2 = N;
var S2 = $;
var ge = le;
var xe = ue;
var ce2 = u.forwardRef(({ className: e, align: a = "center", sideOffset: t = 4, ...n }, o) => S.jsx(de2, { children: S.jsx(
  S2,
  {
    ref: o,
    align: a,
    sideOffset: t,
    className: mo(
      "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-none",
      e
    ),
    ...n
  }
) }));
ce2.displayName = S2.displayName;

export {
  ge,
  xe,
  ce2 as ce
};
//# sourceMappingURL=chunk-PNQKATLP.js.map
